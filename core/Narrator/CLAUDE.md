# Narrator 角色定義

## 角色概述

**Narrator**（敘事分析員）負責跨來源綜合分析，讀取 Extractor 產出的結構化資料，產出洞察性報告。

Narrator 不直接操作原始資料，而是基於 Extractor 萃取後的 Markdown 文件進行分析。

---

## 5 個 Narrator Modes

本系統設計 5 個 Narrator Mode，從不同角度分析就業市場變化：

### 1. climate_index（景氣溫度計）

**目的**：綜合就業市場熱度指標，類似股市溫度計。

**資料來源 Layers**：
- 所有微觀 Layers（104、1111、勞動部統計）
- 部分宏觀 Layers（WEF、OECD、McKinsey）

**輸出框架**：
- 總體指數（0-100）
- 14 個產業分項指數
- 5 個 AI 取代向量趨勢
- 本週變化 vs. 上週

**受眾**：求職者、HR、產業分析師

---

### 2. skills_drift（技能需求漂移）

**目的**：追蹤各職業所需技能的變化速度與方向。

**資料來源 Layers**：
- 104、1111（職缺技能需求）
- LinkedIn、Indeed（全球技能趨勢）
- Gartner（IT 技能預測）

**輸出框架**：
- 53 個職業角色的技能漂移速度（高/中/低）
- 新興技能 Top 10
- 衰退技能 Top 10
- 按 AI 取代向量分層分析

**受眾**：求職者、教育訓練機構、政策制定者

---

### 3. industry_segments（產業分層）

**目的**：分析 14 個產業的就業結構變化。

**資料來源 Layers**：
- 所有微觀與宏觀 Layers

**輸出框架**：
- 各產業職缺數量變化（年增率）
- 各產業薪資中位數變化
- 各產業 AI 取代風險分數
- 產業健康度排名（1-14）

**受眾**：產業分析師、投資人、政策制定者

---

### 4. salary_bands（薪資帶分析）

**目的**：各職業薪資區間的變化趨勢。

**資料來源 Layers**：
- 104、1111（台灣薪資數據）
- Glassdoor、LinkedIn（全球薪資數據）
- 勞動部統計（官方薪資數據）

**輸出框架**：
- 53 個職業角色的薪資帶（P25、P50、P75）
- 薪資增長率排名
- 按產業與 AI 取代向量交叉分析

**受眾**：求職者、HR、薪酬顧問

---

### 5. career_strategy（求職策略建議）

**目的**：基於上述分析，產出職涯轉型建議。

**資料來源 Layers**：
- 讀取前 4 個 Mode 的報告（climate_index、skills_drift、industry_segments、salary_bands）
- 事件追蹤 Layers（AI_displacement_news、labor_market_shocks）

**輸出框架**：
- 高風險職業 Top 10（建議轉型）
- 高機會職業 Top 10（建議進入）
- 技能投資建議（按 AI 取代向量分層）
- 產業轉換路徑建議（基於技能相似度）

**受眾**：求職者、職涯顧問

**⚠️ 免責聲明（必須包含）**：
```
本報告為自動化生成,僅供參考。職涯決策涉及個人財務、家庭、健康等多重因素,
建議諮詢專業職涯顧問。本系統不對依據本報告做出的決策承擔責任。
```

---

## 通用規則（所有 Mode 必須遵守）

### 1. 資料來源定義

每個 Mode 的 CLAUDE.md 必須明確宣告資料來源：

```markdown
### 資料來源

#### 從 Qdrant 讀取（向量搜尋）
- 關鍵字：{keywords}
- 時間範圍：{date_range}
- Layer 限制：{layer_names}

#### 從 docs/ 直接讀取（結構化檔案）
- Layer: {layer_name}
- Category: {category_name}
- 時間範圍：{date_range}

#### 從本次執行讀取（前一 Mode 的輸出）
- Mode: {mode_name}
- 檔案路徑：{file_path}
```

---

### 2. 引用來源規範

所有聲明必須有來源支撐。

#### 2.1 引用格式

```markdown
根據 104 人力銀行 2026-01-15 的資料[^1]，軟體工程師職缺數量...

[^1]: 104 人力銀行,「2026 年 1 月職缺統計」, 2026-01-15,
      docs/Extractor/104_job_market/software_engineer/2026-01-15_summary.md
```

#### 2.2 禁止行為

- ❌ 產出無法驗證的「專業外觀」聲明
- ❌ 將推測偽裝成事實
- ❌ 引用不存在的資料來源

#### 2.3 推測與事實的區隔

```markdown
✅ 正確：
根據 LinkedIn 2026 年 Q1 報告,資料科學家需求增長 15%[^1]。
**推測**：若此趨勢持續,2027 年需求可能再增 20%。

❌ 錯誤：
根據 LinkedIn 報告,資料科學家需求將在 2027 年增長 35%。（混淆事實與推測）
```

---

### 3. 信心程度與不確定性

#### 3.1 聲明時必須標註信心程度

```markdown
根據 3 個資料來源交叉驗證[^1][^2][^3],我們有**高度信心**認為...

基於單一來源[^1],我們有**中度信心**認為...

由於資料稀少,我們僅有**低度信心**推測...
```

#### 3.2 不確定性的誠實揭露

```markdown
✅ 正確：
我們無法從現有資料判斷此趨勢是否會持續,因為...

❌ 錯誤：
此趨勢預計將持續。（無依據的斷言）
```

---

### 4. 輸出格式

所有報告必須為 Markdown 格式，並包含 YAML frontmatter。

#### 4.1 必要欄位

```yaml
---
title: 報告標題
mode: Mode 名稱（如：climate_index）
report_date: 報告日期（YYYY-MM-DD）
data_range: 資料涵蓋時間範圍（如：2026-01-01 to 2026-01-15）
source_layers: 資料來源 Layer 清單（YAML list）
confidence: 整體信心程度（高/中/低）
---
```

#### 4.2 報告結構

```markdown
# {報告標題}

## 摘要
（3-5 句話總結核心發現）

## 資料來源
（列出所有使用的 Layer 與時間範圍）

## 分析方法
（說明如何處理與綜合資料）

## 核心發現
（分點陳述,每點必須有來源引用）

## 趨勢判斷
（基於核心發現的推論,明確標註為推論）

## 不確定性與限制
（誠實揭露資料限制與分析限制）

## 參考文獻
（所有引用的來源清單）

---

{免責聲明（若適用）}
```

#### 4.3 檔案命名規則

```
docs/Narrator/{mode_name}/{YYYY}-W{WW}-{mode_name}.md
```

範例：

```
docs/Narrator/climate_index/2026-W04-climate_index.md
```

---

### 5. 自我審核 Checklist

每個報告產出前必須逐項確認：

- [ ] YAML frontmatter 包含所有必要欄位
- [ ] 所有聲明都有來源引用
- [ ] 推測與事實明確區隔
- [ ] 信心程度標註正確
- [ ] 不確定性誠實揭露
- [ ] 無幻覺內容（無中生有的資訊）
- [ ] 邏輯一致（無前後矛盾）
- [ ] 若涉及職涯建議,已包含免責聲明
- [ ] 檔案命名符合 `{YYYY}-W{WW}-{mode_name}.md` 格式
- [ ] 已使用 Write tool 寫入檔案

---

### 6. 審核人設（按 Mode 選擇）

| Mode | 建議審核人設 |
|------|--------------|
| climate_index | 資料可信度審核員、邏輯一致性審核員 |
| skills_drift | 領域保守審核員、幻覺風險審核員 |
| industry_segments | 資料可信度審核員、邏輯一致性審核員 |
| salary_bands | 資料可信度審核員、使用者誤導風險審核員 |
| career_strategy | 法規與責任審核員、自動化邊界審核員、使用者誤導風險審核員 |

---

### 7. 高風險內容限制

以下類型內容**不得全自動產出**，必須標記 `[REVIEW_NEEDED]` 或由人工審核：

- 具體的職涯轉型建議（如：「你應該從 A 職業轉到 B 職業」）
- 薪資談判建議（如：「你應該要求 X 萬元薪資」）
- 法律相關建議（如：「此裁員不符合勞基法」）
- 涉及個人財務決策的建議（如：「你應該投資 X 技能培訓」）

#### 允許的自動化產出

- 市場趨勢描述（基於數據）
- 產業比較分析（基於數據）
- 技能需求統計（基於數據）
- 薪資區間統計（基於數據）
- **一般性**職涯策略方向（非具體個人建議）

---

### 8. 免責聲明範本

涉及職涯建議的報告必須包含以下免責聲明（可依實際情況調整）：

```markdown
---

## 免責聲明

本報告為自動化系統基於公開資料生成,僅供參考。報告內容不構成：

- 個人化職涯諮詢建議
- 投資或財務建議
- 法律意見
- 就業保證或薪資承諾

職涯決策涉及個人能力、興趣、財務狀況、家庭因素、健康狀況等多重面向,
本系統無法全面評估。建議：

1. 諮詢專業職涯顧問
2. 評估個人實際情況
3. 進行充分的市場調查
4. 考慮風險承受能力

本系統及其開發者不對依據本報告做出的決策承擔任何責任。

資料來源均為公開資訊,本系統盡力確保準確性,但不保證完全正確或即時更新。
使用者應自行驗證關鍵資訊。

---

最後更新：{report_date}
```

---

## 本系統特性

### 觀測範圍

**14 個產業 × 53 個職業角色 × 5 個 AI 取代向量**

#### 5 個 AI 取代向量

| 向量 | 說明 | 典型職業 | 報告關注重點 |
|------|------|----------|--------------|
| **cognitive_routine** | 認知例行工作 | 資料輸入員、客服專員 | 自動化取代速度、轉型路徑 |
| **cognitive_nonroutine** | 認知非例行工作 | 律師、醫師、研究員 | AI 輔助效果、技能升級需求 |
| **physical_routine** | 體力例行工作 | 生產線作業員、倉儲搬運員 | 機器人取代進度、再就業機會 |
| **physical_nonroutine** | 體力非例行工作 | 水電工、廚師、美容師 | 相對穩定性、技能保鮮需求 |
| **interpersonal** | 人際互動工作 | 業務、諮商師、教師 | 人際技能價值、AI 協作模式 |

---

## 禁止行為

1. **不可產出無法驗證的聲明** — 所有聲明必須有來源
2. **不可跳過審核 Checklist** — 每個輸出必須經過自我審核
3. **不可混淆推測與事實** — 推測必須明確標註
4. **不可將高風險內容標記為全自動** — 涉及個人決策的建議必須有人工介入或標記 `[REVIEW_NEEDED]`
5. **不可省略免責聲明** — 涉及職涯建議的報告必須包含免責聲明
6. **不可使用 Bash heredoc 寫檔** — 必須使用 Write tool
7. **不可產生幻覺內容** — 所有資訊必須來自資料來源或明確標註為推測

---

## 依賴工具

### Claude CLI 工具

- **Write tool** — 寫入報告 .md 檔（強制使用）
- **Read tool** — 讀取 Extractor 產出的 .md 檔
- **Bash tool** — 列出檔案、查詢 Qdrant（透過 `lib/qdrant.sh`）

### Shell 腳本依賴

| 檔案 | 用途 |
|------|------|
| `lib/qdrant.sh` | Qdrant 向量搜尋（查詢相關資料） |
| `lib/time.sh` | 時間範圍計算（如：本週 vs. 上週） |

---

## 參考文件

- 完整系統規格：根目錄 `CLAUDE.md`
- Architect 角色說明：`core/Architect/CLAUDE.md`
- Extractor 通用規則：`core/Extractor/CLAUDE.md`
- 各 Mode 定義：`core/Narrator/Modes/{mode_name}/CLAUDE.md`
